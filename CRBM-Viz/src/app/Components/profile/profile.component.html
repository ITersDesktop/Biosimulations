<!--
<pre *ngIf="auth.userProfile$ | async as profile">
  <code>{{ profile | json }}</code>
  <code>{{ userData | json }}</code>
</pre>
-->

<h1>
  Profile
  <a href="#" class="h1"
    ><mat-icon class="unverified" aria-hidden="false" aria-label="Edit profile"
      >edit</mat-icon
    ></a
  >
</h1>

<div *ngIf="auth.userProfile$ | async as autoProfile">
  <img class="photo" src="{{ autoProfile.picture }}" />
  <div class="name mat-title">{{ autoProfile.name }}</div>
  <div class="username">{{ autoProfile.nickname }}</div>
  <div class="description" *ngIf="profile.description">{{ 
    profile.description 
  }}</div>

  <table class="details">
    <tr *ngIf="profile.organization">
      <th>
        <mat-icon aria-hidden="false" aria-label="Organization"
          >people</mat-icon
        >
      </th>
      <td>{{ profile.organization }}</td>
    </tr>

    <tr *ngIf="profile.website">
      <th>
        <mat-icon aria-hidden="false" aria-label="Website">link</mat-icon>
      </th>
      <td>
        <a href="{{ profile.website }}">{{
          profile.website
        }}</a>
      </td>
    </tr>

    <tr *ngIf="autoProfile.email" class="email">
      <th><mat-icon aria-hidden="false" aria-label="Email">email</mat-icon></th>
      <td>
        <a href="mailto:{{ autoProfile.email }}">{{ autoProfile.email }}</a>
        <span *ngIf="autoProfile.email_verified; else emailUnverified">
          <mat-icon
            class="verified"
            aria-hidden="false"
            aria-label="Email verified"
            >check</mat-icon
          >
        </span>
        <ng-template #emailUnverified>
          <mat-icon
            class="unverified"
            aria-hidden="false"
            aria-label="Email not verified"
            >close</mat-icon
          >
        </ng-template>
      </td>
    </tr>

    <tr *ngIf="profile.github">
      <th>
        <fa-icon
          [icon]="['fab', 'github']"
          size="lg"
          aria-hidden="false"
          aria-label="GitHub"
        ></fa-icon>
      </th>
      <td>
        <a href="https://github.com/{{ profile.github }}">{{
          profile.github
        }}</a>
      </td>
    </tr>

    <tr *ngIf="profile.googleScholar">
      <th>
        <fa-icon
          [icon]="['fab', 'google']"
          size="lg"
          aria-hidden="false"
          aria-label="Google Scholar"
        ></fa-icon>
      </th>
      <td>
        <a
          href="https://scholar.google.com/citations?user={{
            profile.googleScholar
          }}"
          >{{ profile.googleScholar }}</a
        >
      </td>
    </tr>

    <tr *ngIf="profile.orcid">
      <th>
        <fa-icon
          [icon]="['fab', 'orcid']"
          size="lg"
          aria-hidden="false"
          aria-label="ORCID"
        ></fa-icon>
      </th>
      <td>
        <a href="https://orcid.org/{{ profile.orcid }}">{{
          profile.orcid
        }}</a>
      </td>
    </tr>
  </table>
</div>
